Command and Observer patterns with threads